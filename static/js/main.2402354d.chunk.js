(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{106:function(e,t,n){},189:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(99),a=n.n(r),s=(n(106),n(19)),i=n.n(s),o=n(32),d=n(15),l=n(60),u=n(100),j=n.n(u),h=n.p+"static/media/good_beep.1eda3a39.mp3",b=n.p+"static/media/error_beep.ea0f5342.mp3",f=(n(189),n(0)),m="640418";var v=function(){var e,t,n=Object(c.useState)(!1),r=Object(d.a)(n,2),a=r[0],s=r[1],u=Object(c.useState)(!1),v=Object(d.a)(u,2),O=v[0],x=v[1],p=Object(c.useState)({}),N=Object(d.a)(p,2),k=N[0],S=N[1],y=Object(c.useState)(),w=Object(d.a)(y,2),C=w[0],g=w[1],F=Object(c.useState)(),E=Object(d.a)(F,2),D=E[0],A=E[1],I=Object(c.useState)(),J=Object(d.a)(I,2),L=J[0],_=J[1],P=Object(l.a)(h),R=Object(d.a)(P,1)[0],T=Object(l.a)(b),U=Object(d.a)(T,1)[0],z=Object(c.useRef)(null);Object(c.useEffect)((function(){B(),G()}),[D,L]);var B=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,c,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("accountid","598"),t.append("key","7baf9b9d42dcde06a7000e6e51005a56d8c726b4"),n={method:"POST",body:t,redirect:"follow"},e.next=6,fetch("https://api-na.eventscloud.com/api/v2/global/authorize.json",n).then((function(e){return e.text()})).then((function(e){return e})).catch((function(e){return console.log("error",e)}));case 6:return c=e.sent,e.next=9,JSON.parse(c);case 9:r=e.sent,(a=r.accesstoken)&&A(a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(),D){e.next=3;break}return e.abrupt("return");case 3:return t={method:"GET",redirect:"follow"},e.next=6,fetch("https://api-na.eventscloud.com/api/v2/ereg/listAttendees.json?accesstoken=".concat(D,"&eventid=").concat(m),t).then((function(e){return e.text()})).then((function(e){return e})).catch((function(e){return console.dir(e)}));case 6:return n=e.sent,e.next=9,JSON.parse(n);case 9:c=e.sent,r={},Array.isArray(c)?c.forEach((function(e){var t=e.name.split(" "),n=Object(d.a)(t,2),c=n[0],a=n[1],s={id:e.attendeeid,firstName:c,lastName:a,CheckedIn:void 0};r[e.attendeeid]=s})):G(),S(r);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,c={method:"POST",body:n,redirect:"follow"},e.next=4,fetch("".concat("https://api-na.eventscloud.com/api/v2/ereg/checkInAttendee.json?accesstoken=").concat(D,"&eventid=").concat(m,"&attendeeid=").concat(t),c).then((function(e){return e.text()})).then((function(e){return e})).catch((function(e){return e}));case 4:return r=e.sent,e.abrupt("return",JSON.parse(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!1),e.next=3,q(t);case 3:n=e.sent,K(t,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e,t){var n;(null===t||void 0===t?void 0:t.description)?(R(),_({id:e,success:t.description})):(null===t||void 0===t||null===(n=t.error)||void 0===n?void 0:n.data)?(U(),_({id:e,error:null===t||void 0===t?void 0:t.error.data})):_({error:"Something went wrong. Please try again"})};return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("h1",{children:"Scan Barcode for access to the event."}),a?Object(f.jsxs)("div",{className:"new_scan ",children:[Object(f.jsx)("div",{className:"box holder",children:Object(f.jsx)(j.a,{width:400,height:400,onUpdate:function(e,t){t&&H(t.text)}})}),Object(f.jsx)("button",{onClick:function(){return s(!1),void _("")},children:"Reset"})]}):Object(f.jsxs)("div",{className:"new_scan",children:[Object(f.jsx)("span",{className:"box ",children:"\xa0"}),Object(f.jsx)("button",{onClick:function(){return s(!0),x(!1),g(""),void _("")},children:"New Scan"}),Object(f.jsx)("button",{style:{fontSize:"1rem"},onClick:function(){return x(!O),g(""),void _("")},children:O?"Close Database Search":"Search Database"})]}),(null===L||void 0===L?void 0:L.error)&&Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"error",children:"DENIED"}),Object(f.jsxs)("h2",{children:[" ",k[L.id].firstName," ",k[L.id].lastName]}),Object(f.jsx)("p",{children:L.error})]}),(null===L||void 0===L?void 0:L.success)&&Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"success",children:"SUCCESS"}),Object(f.jsxs)("h2",{children:[k[L.id].firstName," ",k[L.id].lastName]}),Object(f.jsx)("p",{children:"Thank you for joining us! Please enjoy the event!"})]}),Object(f.jsx)("section",{className:"codes",children:O&&Object(f.jsxs)("div",{className:"search_wrapper",children:[Object(f.jsx)("h2",{children:"Search Database"}),C&&Object(f.jsxs)("div",{children:["found"===(null===C||void 0===C?void 0:C.found)&&!(null===(e=k[null===C||void 0===C?void 0:C.id])||void 0===e?void 0:e.CheckedIn)&&Object(f.jsxs)("div",{className:"found",children:[Object(f.jsx)("hr",{}),Object(f.jsx)("h3",{children:"Found"}),Object(f.jsxs)("p",{children:[Object(f.jsxs)("strong",{children:[k[C.id].firstName," ",k[C.id].lastName," (",C.id,") :"," "]}),"Found in database."]}),Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsx)("button",{className:"add",onClick:function(){return H(C.id)},children:"Check in manually?"}),Object(f.jsx)("button",{className:"clear",onClick:function(){return g("")},children:"Cancel"})]}),Object(f.jsx)("hr",{})]}),"found"===(null===C||void 0===C?void 0:C.found)&&(null===(t=k[null===C||void 0===C?void 0:C.id])||void 0===t?void 0:t.CheckedIn)&&Object(f.jsxs)("div",{className:"found",children:[Object(f.jsx)("hr",{}),Object(f.jsx)("h3",{children:"Already checked in."}),Object(f.jsxs)("p",{children:[Object(f.jsxs)("strong",{children:[C.firstName," ",C.lastName,":"," "]}),"Found in database, but already checked in."]}),Object(f.jsx)("div",{style:{display:"flex"},children:Object(f.jsx)("button",{className:"clear",onClick:function(){return g("")},children:"Close"})}),Object(f.jsx)("hr",{})]}),"not found"===(null===C||void 0===C?void 0:C.found)&&Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Not found in database."}),Object(f.jsx)("button",{className:"clear",onClick:function(){return g("")},children:"Clear"})]}),"success"===(null===C||void 0===C?void 0:C.found)&&Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"success",children:"SUCCESS"}),Object(f.jsxs)("h2",{children:[C.firstName," ",C.lastName," has been checked in."]}),Object(f.jsx)("p",{children:" Enjoy the event!"}),Object(f.jsx)("hr",{})]})]}),Object(f.jsxs)("form",{onSubmit:function(e){return function(e){for(var t in e.preventDefault(),_(""),k){if(k[t].firstName.toLowerCase().trim()===e.target.firstName.value.toLowerCase().trim()&&k[t].lastName.toLowerCase().trim()===e.target.lastName.value.toLowerCase().trim())return void g({found:"found",id:k[t].id,firstName:e.target.firstName.value,lastName:e.target.lastName.value});if(k[t].id.trim()===e.target.id.value.trim())return void g({found:"found",id:k[t].id,firstName:e.target.firstName.value,lastName:e.target.lastName.value})}g({found:"not found",firstName:e.target.firstName.value,lastName:e.target.lastName.value})}(e)},ref:z,children:[Object(f.jsxs)("div",{className:"form",children:[Object(f.jsx)("h4",{children:"Search by name:"}),Object(f.jsxs)("label",{htmlFor:"firstName",children:["First Name ",Object(f.jsx)("input",{id:"firstName"})]}),Object(f.jsxs)("label",{htmlFor:"lastName",children:["Last Name ",Object(f.jsx)("input",{id:"lastName"})]})]}),Object(f.jsxs)("div",{className:"form",children:[Object(f.jsx)("h4",{children:"Search by Reference Number:"}),Object(f.jsxs)("label",{htmlFor:"id",children:["Reference Number ",Object(f.jsx)("input",{id:"id"})]})]}),Object(f.jsx)("button",{className:"add",type:"submit",children:"Search"})]}),Object(f.jsx)("button",{className:"clear",onClick:function(){return z.current.reset(),g(""),void _("")},children:"Clear Fields"})]})})]})};a.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.2402354d.chunk.js.map