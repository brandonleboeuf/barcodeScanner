{"version":3,"sources":["good_beep.mp3","error_beep.mp3","App.js","index.js"],"names":["base","Airtable","apiKey","process","App","useState","data","setData","airtableData","setAirtableData","useSound","goodBeep","playGoodSound","errorBeep","playBadSound","manualCheckIn","setManualCheckIn","search","setSearch","inputEl","useRef","dataArray","id","push","useEffect","a","objectHolder","select","eachPage","records","fetchNextPage","forEach","record","idCode","get","obj","firstName","lastName","CheckedIn","err","console","error","getData","undefined","update","className","onClick","style","fontSize","width","height","onUpdate","result","text","found","display","state","onSubmit","e","item","preventDefault","toLowerCase","trim","target","value","handleSubmit","ref","flexDirection","htmlFor","type","current","reset","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d3e09f71.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/good_beep.1eda3a39.mp3\";","export default __webpack_public_path__ + \"static/media/error_beep.ea0f5342.mp3\";","\nimport {useEffect, useState, useRef} from 'react';\nimport useSound from 'use-sound';\nimport goodBeep from './good_beep.mp3'\nimport errorBeep from './error_beep.mp3'\n// import BarcodeScannerComponent from \"react-webcam-barcode-scanner\";\nimport BarcodeScannerComponent from \"react-qr-barcode-scanner\";\nimport Airtable from 'airtable';\nimport Barcode from 'react-barcode'\n\nimport './App.css';\nconst KEY = process.env.REACT_APP_AIRTABLE_API_KEY\n\nconst base = new Airtable({apiKey: KEY}).base('appLIkbpURZaoR4qA');\n\nfunction App() {\n  const [ data, setData ] = useState(\"canceled\");\n  const [airtableData, setAirtableData] = useState({})\n  const [playGoodSound] = useSound(goodBeep)\n  const [playBadSound] = useSound(errorBeep)\n  const [manualCheckIn, setManualCheckIn] = useState()\n  const [search, setSearch] = useState(false)\n  const inputEl = useRef(null)\n  \n  const dataArray = []\n  \n  for (let id in airtableData){\n    dataArray.push(id)\n  }\n\n  useEffect(()=>{\n    const getData = async()=> {\n      let objectHolder = {}\n\n      base('Table 1').select().eachPage(function page(records, fetchNextPage) {\n        records.forEach(function(record) {\n           const idCode = record.get('idCode');\n            const obj = {\n              id: record.id,\n              idCode, \n              firstName: record.get('firstName'), \n              lastName: record.get('lastName'), \n              CheckedIn: record.get('CheckedIn'), \n            }\n            // setAirtableData(state => ({...state, [idCode]:obj}))\n            objectHolder[idCode] = obj\n        });\n        fetchNextPage();\n    \n    }, function done(err) {\n        if (err) { console.error(err); return; }\n    });\n    setAirtableData(objectHolder)\n    }\n    getData()\n  },[data])\n\n  useEffect(()=>{\n     if (data && data !== \"canceled\" && airtableData[data]?.CheckedIn ) {\n       playBadSound()\n      } else if (data && data !== \"canceled\" &&  airtableData[data] === undefined) {\n      playBadSound()\n    }else if (data && data !== \"canceled\") {\n      playGoodSound()\n      base('Table 1').update([\n        {\n          \"id\": airtableData[data].id,\n          \"fields\": {\n            \"CheckedIn\": true\n          }\n        }\n      ], function(err, records) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n        \n      });\n    } \n    \n  },[data])\n\nconst handleSubmit = (e) => {\n  e.preventDefault()\n\n  for (let item in airtableData) {\n    if (\n      airtableData[item].firstName.toLowerCase().trim() === e.target.firstName.value.toLowerCase().trim() \n      && airtableData[item].lastName.toLowerCase().trim() === e.target.lastName.value.toLowerCase().trim()) {\n      setManualCheckIn({\n        found: \"found\",\n        id: airtableData[item].id,\n        firstName: e.target.firstName.value,\n        lastName: e.target.lastName.value,\n      })\n      return\n    } \n  }\n  \n  setManualCheckIn({\n    found: \"not found\",\n    firstName: e.target.firstName.value,\n    lastName: e.target.lastName.value,\n  })\n}\n\nconst handleCheckIn = () => {\n  playGoodSound()\n  base('Table 1').update([\n    {\n      \"id\": manualCheckIn.id,\n      \"fields\": {\n        \"CheckedIn\": true\n      }\n    }\n  ], function(err, records) {\n    if (err) {\n      console.error(err);\n      return;\n    }\n   \n    setManualCheckIn((state) => (\n      {...state,\n      found: \"success\",\n    }))\n  });\n} \n\n  return (\n    <div className=\"App\">\n    <h1>Scan Barcode for access to the event.</h1>\n      {!data ? (\n        <div className=\"new_scan\">\n          <div className=\"box holder\">\n            <BarcodeScannerComponent\n              width={400}\n              height={400}\n              onUpdate={(err, result) => {\n                if (result && !data) setData(result.text)\n              }}\n            />\n          </div>\n        <button onClick={()=> setData(\"canceled\")}>Reset</button>\n        </div>\n      ) : (\n        <div className=\"new_scan\">\n          <span className=\"box\">&nbsp;</span>\n          {/* <button onClick={()=> runDataFetcher()}>New Scan</button> */}\n          <button onClick={()=> setData('')}>New Scan</button>\n          <button style={{fontSize: \"1rem\"}} onClick={()=> setSearch(!search)}>{search ? \"Cancel\" : \"Search Database\" }</button>\n        </div>\n      )}\n      {data !== \"canceled\" && airtableData?.[data] && !airtableData?.[data]?.CheckedIn && (\n        <div>\n          <h1 className=\"success\">SUCCESS</h1>\n          <h2>{airtableData[data].firstName} {airtableData[data].lastName} has been checked in.</h2>\n          <p> Enjoy the event!</p>\n        </div>\n        )\n      }\n      {airtableData[data]?.CheckedIn && (\n        <div>\n          <h1 className=\"error\">ERROR</h1>\n          <h2>{airtableData[data].firstName} {airtableData[data].lastName} has ALREADY been checked in...</h2>\n          <p>Please try another code</p>\n        </div>\n        )\n      }\n      \n      {data && airtableData[data] === undefined && data !== \"canceled\" &&(\n        <div>\n          <h1 className=\"error\">ERROR</h1>\n          <h2>{data} is not in the database.</h2>\n          <p>Please try another code.</p>\n        </div>\n        )\n      }\n      <section className=\"codes\">\n   \n\n      {/* SEARCH */}\n      {search && (\n\n      <div>\n      <h4>Search Database</h4>\n      {manualCheckIn ? (\n        <div>\n        {manualCheckIn.found === \"found\" && (\n          <div>\n            <p><strong>{manualCheckIn.firstName} {manualCheckIn.lastName}: </strong>Found in database.</p>\n            <div style={{display: \"flex\"}}>\n              <button className=\"add\" onClick={() => handleCheckIn()}>Check in manually?</button>\n              <button className=\"clear\" onClick={() => setManualCheckIn(\"\")}>Cancle</button>\n            </div>\n          </div>\n        )}\n\n        {manualCheckIn.found === \"not found\" && (\n          <div>\n            <p><strong>{manualCheckIn.firstName} {manualCheckIn.lastName}: </strong>Not found in database.</p>\n            <button className=\"clear\" onClick={() => setManualCheckIn(\"\")}>Clear</button>\n          </div>\n        )}\n\n        \n        </div>) : (\n        <>\n          {manualCheckIn.found === \"success\" && (\n              <div>\n              <h1 className=\"success\">SUCCESS</h1>\n              <h2>{manualCheckIn.firstName} {manualCheckIn.lastName} has been checked in.</h2>\n              <p> Enjoy the event!</p>\n            </div>\n          )}\n        <form onSubmit={(e) => handleSubmit(e)}  ref={inputEl}>\n          <div style={{display: \"flex\", flexDirection: \"column\"}}>\n\n            <label htmlFor=\"firstName\">First Name <input id=\"firstName\"/></label>\n            \n            <label htmlFor=\"lastName\">Last Name <input id=\"lastName\"/></label>\n          </div>\n          <button className=\"add\" type=\"submit\">Search</button>\n          <button className=\"clear\" onClick={()=> inputEl.current.reset() }>Clear Fields</button>\n        </form>\n        </>\n        )}\n      </div>\n      )}\n      </section>\n      {/* show barcodes  */}\n     \n    </div>\n  )\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}